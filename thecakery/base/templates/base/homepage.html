{% extends "base/base.html" %}
{% load static %}
{% block title %}Home{% endblock %}

{% block content %}

<header>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
    <script src="{% static 'js/main.js' %}"></script>
</header>

<!-- ****Add Slideshow for texts and images -->
<div id="slideshow-container">
    <div class="mySlides slide1 active">
      <div class="content">
        <div class="col-lg-6 text-left text-lg-start">
          <h1 class="font-secondary mb-4" style="color:palevioletred">Sweet Taste</h1>
          <h1 class="secondary-color"><strong>Dream and Fantasy</strong></h1>
          <h1 class="secondary-color"><strong>Comes in Flavor</strong></h1>
          <p id="desc1">Made with the finest ingredients and a touch of love, 
              each cake is a masterpiece of flavor and design. Browse our catalog, place your order, 
              and indulge in the perfect slice of happiness. At The Cakery, we turn every moment into a delicious memory.</p>
          <div class="d-flex align-items-center justify-content-center justify-content-lg-start pt-5">
            <a href="" class="slideshow-btn">Buy Now</a>
          </div>                              
        </div>
      </div>
    </div>
    <div class="mySlides slide2">
      <div class="content">
        <div class="col-lg-6 text-left text-lg-start">
          <h1 class="font-secondary mb-4" style="color:palevioletred">Sweet Taste</h1>
          <h1 class="secondary-color"><strong>Indulge in Cream</strong></h1>
          <h1 class="secondary-color"><strong>Strawberry Flavours</strong></h1>
          <p id="desc1">Made with the finest ingredients and a touch of love, 
              each cake is a masterpiece of flavor and design. Browse our catalog, place your order, 
              and indulge in the perfect slice of happiness. At The Cakery, we turn every moment into a delicious memory.</p>
          <div class="d-flex align-items-center justify-content-center justify-content-lg-start pt-5">
            <a href="" class="slideshow-btn">Buy Now</a>
          </div>                               
        </div>
      </div>
    </div>
  </div>  


<script>
    let slideIndex = 0;
    showSlides();
    
    function showSlides() {
        let i;
        let slides = document.getElementsByClassName("mySlides");
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
        }
        slideIndex++;
        if (slideIndex > slides.length) {slideIndex = 1}    
        slides[slideIndex-1].style.display = "block";  
        setTimeout(showSlides, 6000); // Change slide every 5 seconds
    }
</script>
    

<!-- Displaying Flavors for users-->
<div class="container2">
    <h2 style="text-align: center; color: #FAABBD; font-size: 40px;"><strong>Our Flavours</strong></h2>
    <div class="container6 mt-5">
        <div class="row justify-content-center">
            {% for flavour in flavours %}
            <div class="col-md-4 col-lg-4"> <!-- Adjusted to make the container smaller -->
                <div class="card">
                    <div class="card-img-container">
                        <img src="{% if flavour.image %}{{ flavour.image.url }}{% else %}{% static 'image/placeholder.webp' %}{% endif %}" 
                            class="card-img-top" 
                            alt="{{ flavour.name }}">
                        <button class="see-more-btn">See More</button>
                    </div>
                    <div class="card-text-container">
                        <h5 class="card-title">{{ flavour.name }}</h5>
                        <p class="card-text">{{ flavour.description }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>


<div class="container-fluid pt-5">
    <div class="container">
        <div class="section-title position-relative text-center mx-auto mb-5 pb-3" style="max-width: 600px;">
            <h2 class="font-secondary" style="color: #F598B0;">About Us</h2>
            <h5 class="display-4 text-uppercase">Welcome To The Cakery</h5>
        </div>
        <div class="row gx-5">
            <div class="col-lg-5 mb-5 mb-lg-0" style="min-height: 400px;">
                <div class="position-relative h-100">
                    <img class="position-absolute w-100 h-100" src="{% static 'image/strawchoco.jpg' %}" style="object-fit: cover;">
                </div>
            </div>
            <div class="col-lg-6 pb-5">
                <h4 class="mb-4">Tempor erat elitr rebum clita. Diam dolor diam ipsum erat lorem sed stet labore lorem sit clita duo</h4>
                <p class="mb-5">Tempor erat elitr at rebum at at clita. Diam dolor diam ipsum et tempor sit. Clita erat ipsum et lorem et sit, sed stet no labore lorem sit. Sanctus clita duo justo et tempor eirmod magna dolore erat amet magna</p>
                <div class="row g-5">
                    <div class="col-sm-6">
                        <div class="d-flex align-items-center justify-content-center border-inner mb-4" style="width: 90px; height: 90px; background-color: #F598B0;">
                            <i class="fa fa-heartbeat fa-2x text-white"></i>
                        </div>
                        <h4 class="text-uppercase">100% Healthy</h4>
                        <p class="mb-0">Labore justo vero ipsum sit clita erat lorem magna clita nonumy dolor magna dolor vero</p>
                    </div>
                    <div class="col-sm-6">
                        <div class="d-flex align-items-center justify-content-center border-inner mb-4" style="width: 90px; height: 90px;background-color: #F598B0;">
                            <i class="fa fa-award fa-2x text-white"></i>
                        </div>
                        <h4 class="text-uppercase">Award Winning</h4>
                        <p class="mb-0">Labore justo vero ipsum sit clita erat lorem magna clita nonumy dolor magna dolor vero</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- About End -->



<!-- Card for displaying mission vision and goal -->
<div class="stats-container pink-bg" id="stats-container">
    <div class="d-flex justify-content-center stats">
        <div class="stat-card">
            <h3 class="stat-title" id="customers-served" data-count="1000" data-start="700">700+</h3>
            <p class="stat-description">Customers</p>
        </div>
        <div class="stat-card">
            <h3 class="stat-title" id="cakes-baked" data-count="2000" data-start="1700">1700+</h3>
            <p class="stat-description">Cakes Baked</p>
        </div>
        <div class="stat-card">
            <h3 class="stat-title" id="flavors-created" data-count="50" data-start="0">0+</h3>
            <p class="stat-description">Flavors Created</p>
        </div>
    </div>
</div>



<!-- Service Start -->
    <div class="container-fluid service position-relative px-5 mt-5" style="margin-bottom: 135px;">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-4 col-md-6">
                    <div class="border-inner text-center text-white p-5" style="background-color: #F598B0;">
                        <h4 class="text-uppercase mb-3">Birthday Cake</h4>
                        <p>Ipsum ipsum clita erat amet dolor sit justo sea eirmod diam stet sit justo amet tempor amet kasd lorem dolor ipsum</p>
                        <a class="text-uppercase text-dark" href="">Read More <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="border-inner text-center text-white p-5" style="background-color: #F598B0;">
                        <h4 class="text-uppercase mb-3">Wedding Cake</h4>
                        <p>Ipsum ipsum clita erat amet dolor sit justo sea eirmod diam stet sit justo amet tempor amet kasd lorem dolor ipsum</p>
                        <a class="text-uppercase text-dark" href="">Read More <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6">
                    <div class="border-inner text-center text-white p-5" style="background-color: #F598B0;">
                        <h4 class="text-uppercase mb-3">Custom Cake</h4>
                        <p>Ipsum ipsum clita erat amet dolor sit justo sea eirmod diam stet sit justo amet tempor amet kasd lorem dolor ipsum</p>
                        <a class="text-uppercase text-dark" href="">Read More <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
                <div class="col-lg-12 col-md-6 text-center">
                    <h1 class="text-uppercase text-light mb-4">30% Discount For This Summer</h1>
                    <a href="" class="btn border-inner py-3 px-5" style="background-color: #FAABBD;">Order Now</a>
                </div>
            </div>
        </div>
    </div>
<!-- Service End-->



<!-- Need css for image and add some buttons-->
<!-- Displaying Cake for users-->
<h2 style="text-align: center;padding: 20px; color: #FAABBD; font-size: 40px;"><strong>Choose Your Cake</strong></h2>

<div class="container3">
    <div class="carousel-wrapper">
        <div class="carousel">
            <div class="carousel-items">
                <!-- Original items -->
                {% for cake in cakes %}
                <div class="custom-card text-center">
                    <a href="#">
                        <div class="custom-card-header">
                            {% for trending in cake.trendingcake_set.all %}
                                {{ trending.trend_type.name }}
                            {% endfor %}
                        </div>
                        <img class="up" src="{{ cake.images.first.image.url }}" alt="{{ cake.images.first.alt_text }}">
                        <div class="custom-card-body">
                            <h5 class="custom-card-title">{{ cake.name }}</h5>
                            <div class="custom-card-footer">
                                {% if cake.get_final_price and cake.get_final_price < cake.price %}
                                    <span class="discounted-price" style="color:black; font-weight: bold;">
                                        {{ cake.get_final_price|floatformat:2 }}$
                                     </span>
                                    <span class="original-price" style="font-weight: 500;text-decoration: line-through; color:palevioletred; font-style: italic;font-size: 15px;margin-left: 15px;">
                                        {{ cake.price }}$
                                    </span>
                                {% else %}
                                    <span class="original-price">
                                        {{ cake.price }}$
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
                <!-- Duplicated items for seamless looping -->
                {% for cake in cakes %}
                <div class="custom-card text-center">
                    <a href="#">
                        <div class="custom-card-header">
                            {% for trending in cake.trendingcake_set.all %}
                                {{ trending.trend_type.name }}
                            {% endfor %}
                        </div>
                        <img class="up" src="{{ cake.images.first.image.url }}" alt="{{ cake.images.first.alt_text }}">
                        <div class="custom-card-body">
                            <h5 class="custom-card-title">{{ cake.name }}</h5>
                            <div class="custom-card-footer">
                                {% if cake.get_final_price and cake.get_final_price < cake.price %}
                                    <span class="discounted-price" style="color:black; font-weight: bold;">
                                        {{ cake.get_final_price|floatformat:2 }}$
                                     </span>
                                    <span class="original-price" style="font-weight: 500;text-decoration: line-through; color:palevioletred; font-style: italic;font-size: 15px;margin-left: 15px;">
                                        {{ cake.price }}$
                                    </span>
                                {% else %}
                                    <span class="original-price">
                                        {{ cake.price }}$
                                    </span>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
        <button class="carousel-button prev">&#10094;</button>
        <button class="carousel-button next">&#10095;</button>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
      const carousel = document.querySelector('.carousel');
      const items = document.querySelectorAll('.custom-card');
      const cardWidth = items[0].offsetWidth;
      let index = 0;
      
      // Set the width of the carousel to fit all items including duplicates
      carousel.style.width = `${cardWidth * items.length}px`;
  
      function moveToNextCard() {
        index++;
        if (index >= items.length / 2) {
          // If index exceeds the number of original items, jump to the start
          carousel.style.transition = 'none'; // Disable transition
          carousel.style.transform = `translateX(0)`;
          index = 0;
          setTimeout(() => {
            carousel.style.transition = 'transform 0.5s ease-in-out'; // Re-enable transition
            moveToNextCard();
          }, 50); // Short delay for smooth transition
        } else {
          carousel.style.transform = `translateX(-${index * cardWidth}px)`;
        }
      }
  
      function moveToPrevCard() {
        if (index === 0) {
          // If at the start, jump to the end of the duplicated items
          carousel.style.transition = 'none'; // Disable transition
          index = items.length / 2 - 1;
          carousel.style.transform = `translateX(-${index * cardWidth}px)`;
          setTimeout(() => {
            carousel.style.transition = 'transform 0.5s ease-in-out'; // Re-enable transition
            moveToPrevCard();
          }, 50); // Short delay for smooth transition
        } else {
          index--;
          carousel.style.transform = `translateX(-${index * cardWidth}px)`;
        }
      }
  
      let autoSlideInterval = setInterval(moveToNextCard, 3000);
  
      document.querySelector('.carousel-button.next').addEventListener('click', function () {
        moveToNextCard();
        resetAutoSlide();
      });
  
      document.querySelector('.carousel-button.prev').addEventListener('click', function () {
        moveToPrevCard();
        resetAutoSlide();
      });
  
      function resetAutoSlide() {
        clearInterval(autoSlideInterval);
        autoSlideInterval = setInterval(moveToNextCard, 3000);
      }
    });
  </script>
  <!-- End Cake Display-->

  



<!-- Contact Section -->
<section class="contact_section layout_padding">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-5 col-lg-4 offset-md-1 offset-lg-2">
          <div class="form_container">
            <div class="heading_container">
              <h2 style="padding: 20px; color: #FAABBD; font-size: 40px; margin-top: 80px;">
                Contact Us
              </h2>
            </div>
            <form action="">
              <div>
                <input type="text" placeholder="Full Name " />
              </div>
              <div>
                <input type="text" placeholder="Phone number" />
              </div>
              <div>
                <input type="email" placeholder="Email" />
              </div>
              <div>
                <input type="text" class="message-box" placeholder="Message" />
              </div>
              <div class="d-flex ">
                <button>
                  SEND NOW
                </button>
              </div>
            </form>
          </div>
        </div>
        <!-- Image Section -->
        <div class="col-md-6 px-0 d-flex justify-content-center align-items-center">
          <div class="image_container" style="max-width: 80%; max-height: 80%;">
            <img src="{% static 'image/cat5.jpg' %}" alt="Contact Us Image" class="img-fluid" style="width: 100%; height: auto; object-fit: contain;">
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end contact section -->
  

<script>
document.addEventListener("DOMContentLoaded", function() {
    function animateValue(id, start, end, duration) {
        // Assumes integers for start and end values
        var obj = document.getElementById(id);
        var range = end - start;
        var current = start;
        var increment = end > start ? 1 : -1;
        var stepTime = Math.abs(Math.floor(duration / range));
        var timer = setInterval(function() {
            current += increment;
            obj.textContent = current + "+";
            if (current == end) {
                clearInterval(timer);
            }
        }, stepTime);
    }

    function checkAnimations() {
        const statsContainer = document.getElementById("stats-container");
        const statsTop = statsContainer.getBoundingClientRect().top;
        const viewportHeight = window.innerHeight;
        if (statsTop < viewportHeight) {
            animateValue("customers-served", 700, 1000, 2000);
            animateValue("cakes-baked", 1700, 2000, 2000);
            animateValue("flavors-created", 0, 50, 2000);
            window.removeEventListener('scroll', checkAnimations);
        }
    }

    window.addEventListener('scroll', checkAnimations);
    checkAnimations();
});

    </script>
{% endblock %}