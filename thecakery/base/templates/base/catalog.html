{% extends "base/base.html" %}
{% load static %}
{% block title %}Contact Us{% endblock %}

{% block content %}

<div>
  <img src="{% static 'image/pink1.jpg' %}" alt="Cake Image" class="up">
</div>

<div class="container3">
  <h3 class="font-secondary">Choose Your Cake</h3>
  <div class="card-deck">
    {% for cake in cakes %}
    <div class="card text-center">
      {% if cake in favorite_cakes %}
        <a href="{% url 'remove_favorite' 'cake' cake.id %}"><i class="fa fa-heart card-heart-icon clicked"></i></a>
      {% else %}
        <a href="{% url 'add_favorite' 'cake' cake.id %}"><i class="fa fa-heart card-heart-icon"></i></a>
      {% endif %}
      <a href="{% url 'cake_detail' cake.name %}">
        <div class="card-header">
          {% if cake.trending_entries.exists %}
            {{ cake.trending_entries.first.trend_type.name }}
          {% else %}
            Most Popular!
          {% endif %}
        </div>
        {% if cake.images.first %}
          <img class="card-img-top" src="{{ cake.images.first.image.url }}" alt="{{ cake.images.first.alt_text }}">
        {% else %}
          <img class="card-img-top" src="default_image_url" alt="No image available">
        {% endif %}
        <div class="card-body">
          <p class="card-text text-muted">{{ cake.category.name }}</p>
          <a href="{% url 'cake_detail' cake.name %}">
              <h5 class="card-title">{{ cake.name }}</h5>
          </a>
          <div class="card-footer">
              {{ cake.get_final_price|floatformat:2 }}$
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>

<style>
.up {
  width: 100%;
  height: 250px;
  object-fit: cover;
}

body {
  font-style: sans-serif;
}

a {
  text-decoration: none;
}

a:hover {
  text-decoration: none;
}

h3 {
  line-height: 3em;
}

.card-deck {
  display: flex;
  justify-content: center;
  flex-wrap: nowrap;
  overflow-x: auto;
}

.card {
  max-width: 20rem; /* Increase the card width */
  flex: 0 0 auto;
  margin-right: 50px; /* Adjust the margin as needed */
  position: relative; /* Ensure the heart icon is positioned correctly */
}

.card:last-child {
  margin-right: 0; /* Remove the margin for the last card */
}

.card:hover {
  box-shadow: 1px 2px 10px lightgray;
  transition: 0.2s;
}

.card-header {
  font-size: 13px;
  color: gray;
  background-color: white;
}

.card-title {
  color: #56091F;
}

.text-muted {
  font-size: 11px;
}

.card-footer {
  font-weight: bold;
  font-size: 18px;
  background-color: pink;
}

.card-img-wrapper {
  position: relative;
}

.card-img-top {
  width: 100%;
  height: 100%; /* Ensure the image covers the card */
  object-fit: cover;
}

.card-heart-icon {
  position: absolute;
  top: 10px;
  right: 10px;
  font-size: 24px;
  color: white; /* Initial color */
  border: 2px solid #FAABBD; /* Border color */
  border-radius: 50%; /* Make the heart icon circular */
  padding: 5px; /* Adjust padding to make the icon more visible */
  background-color: #FAABBD; /* Background color */
  display: none; /* Hide the heart icon initially */
}

.card:hover .card-heart-icon {
  display: block; /* Show the heart icon on hover */
}

.card-heart-icon.clicked {
  color: #FAABBD; /* Change to red on click */
  border-color: #FAABBD; /* Change border color to red on click */
  background-color: white; /* Change background color on click */
}
</style>

<!-- Include Font Awesome for the heart icon -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js" integrity="sha512-h0qOdE3/8PjmMnvVf7RaVY4DxDSoq8KUBsEBW6+L2BqZf9ToFhpkzHfiF8cNc15yW7Hs4S1PzRZfs1TdvXtmA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const heartIcons = document.querySelectorAll(".card-heart-icon");
  
    heartIcons.forEach(function(icon) {
      icon.addEventListener("click", function() {
        icon.classList.toggle("clicked");
      });
    });
  });
  </script>
{% endblock %}
